function showFloatAuthForm(){$("divFloatAuthForm")||printFloatAuthForm(),$("login").value="",$("password").value="",$("remember").checked=!1;var t=getWindowScroll(),i=getWindowDimensions(),e=$("divFloatAuthForm").getDimensions();$("divFloatAuthForm").style.left=parseInt(i.x/2)-parseInt(e.width/2)+t.x+"px",$("divFloatAuthForm").style.top=parseInt(i.y/2)-parseInt(e.height/2)+t.y+"px",$("divAuthFormLoading").hide(),$("divAuthForm").show(),new Effect.Appear("divFloatAuthForm")}function hideFloatAuthForm(){Element.hide("divFloatAuthForm")}function sendFloatAuthForm(event){var login=$("login").value,password=$("password").value,remember=$("remember").checked?1:0,errors="";if(""==login&&(errors+="Введите логин!\n"),""==password&&(errors+="Введите пароль!"),""!=errors)return alert(errors),!1;var divDims=$("divFloatAuthForm").getDimensions();$("divAuthFormLoading").style.height=divDims.height-10+"px",$("divAuthFormLoading").style.width=divDims.width+"px",$("divAuthForm").hide(),$("divAuthFormLoading").show();var url="ajax.php",pars={dj:0,module:"float_login",login:login,password:password,remember:remember},myAjax=new Ajax.Request(url,{method:"get",parameters:pars,onFailure:function(){$("divAuthFormLoading").hide(),$("divAuthForm").show(),alert("Запрос AJAX закончился неудачей.")},onSuccess:function(transport,json){""!=json.error&&($("divAuthFormLoading").hide(),$("divAuthForm").show(),alert("Произошла ошибка:\n\n"+json.error)),""!=json.result&&("OK"==json.result?(hideFloatAuthForm(),eval(afterAuthFunction)):($("divAuthFormLoading").hide(),$("divAuthForm").show(),alert(json.result)))}})}function printFloatAuthForm(){var t='<div id="divFloatAuthForm" class="divFloat" style="display:none; width:450px; height:275px; padding:0; position:absolute;">';t+='<img src="/img/close.gif" width="11" height="11" border="0" onClick="hideFloatAuthForm();" alt="Закрыть" align="right" style="cursor:pointer; margin:0; z-index:100;">',t+='<div id="divAuthFormLoading" class="divLoading" style="display:none; text-align:center; padding:0; margin:0;"><br><br><br><br>Подождите, идет загрузка...</div>',t+='<div id="divAuthForm" style="margin:20px 20px 25px;">',t+='<form name="floatLoginForm" id="floatLoginForm" onSubmit="sendFloatAuthForm(event); return false;">',t+='<TABLE cellpadding="0" width="100%;" class="TblDesc" align="center">',t+='<TR><TD colspan="2"><span class="geo24">Вход на аккаунт посетителя</span><p /></TD></TR>',t+='<TR><TD colspan="2" bgcolor="#F0F0F0" style="padding:12px 60px 10px 10px;">Для последующих действий вам необходимо ввести логин и пароль (или зарегистрироваться):</TD></TR>',t+='<TR><TD colspan="2" class="DivTd"><img src="/img/_n.gif" width="1" height="1" alt="" /></TD></TR>',t+='<TR><TD colspan="2" align="center" class="vera11b" style="height:30px;"><img src="/img/main/register.gif" width="8" height="10" class="LImg9"><a href="join.html">Зарегистрироваться</a></TD></TR>',t+='<TR><TD colspan="2" class="DivTd"><!--  --></TD></TR>',t+='<TR><TD width="120" class="grey" NoWrap>&nbsp;Логин:</TD><TD style="height:30px;"><input type="text" id="login" style="width:150px; font-size:11px;" /></TD></TR>',t+='<TR><TD colspan="2" class="DivTd"><!--  --></TD></TR>',t+='<TR><TD class="grey">&nbsp;Пароль:</TD><TD style="height:30px;"><input type="password" id="password" style="width:150px;font-size:11px;" />&nbsp;<img src="/img/bu.gif" width="10" height="10" alt="" class="LImg9" /><a href="forgot.html">Забыли?</a></TD></TR>',t+='<TR><TD colspan="2" class="DivTd"><!--  --></TD></TR>',t+='<TR><TD class="grey">&nbsp;Входить автоматически:</TD><TD style="height:30px;"><input type="checkbox" id="remember" value="1"></TD></TR>',t+='<TR><TD colspan="2" class="DivTd"><!--  --></TD></TR>',t+='<TR><TD colspan="2" bgcolor="#F0F0F0" style="height:8px; font-size:0px;"><!--  --></TD></TR>',t+='<TR><TD colspan="2" align="right" style="padding:10px 12px 10px 10px;"><input type="image" src="/img/benter.gif" width="64" height="20" alt="Войти" /></TD></TR>',t+="</TABLE></form></div></div>",new Insertion.After("content",t)}var afterAuthFunction="void(null);";